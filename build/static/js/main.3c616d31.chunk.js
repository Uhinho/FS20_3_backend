(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),u=t(16),o=t.n(u),i=t(17),a=t(3),l=function(e){var n=e.onSubmit,t=e.nameInputHandler,c=e.numInputHandler,u=e.newName,o=e.newNumber;return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["Name: ",Object(r.jsx)("input",{onChange:t,value:u})]}),Object(r.jsxs)("div",{children:["Number: ",Object(r.jsx)("input",{onChange:c,value:o})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})})},s=function(e){var n=e.persons,t=e.filter,c=e.onDelete;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(r.jsxs)("li",{children:[e.name," ",e.number,Object(r.jsx)("button",{onClick:function(){return c(e.id)},children:"Delete"})]},e.id)}))})]})},d=function(e){var n=e.handleFilterInput,t=e.newFilter;return Object(r.jsx)("div",{children:Object(r.jsxs)("p",{children:["Filter shown with ",Object(r.jsx)("input",{onChange:n,value:t})]})})},j=function(e){var n=e.message,t=e.color;return null===n?null:Object(r.jsx)("div",{className:"notificationMsg",style:{color:t},children:Object(r.jsx)("p",{children:n})})},b=t(5),f=t.n(b),h="api/persons",m=function(){return f.a.get(h).then((function(e){return e.data}))},p=function(e){return f.a.post(h,e).then((function(e){return e.data}))},O=function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},v=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],u=n[1],o=Object(c.useState)(""),b=Object(a.a)(o,2),f=b[0],h=b[1],v=Object(c.useState)(""),w=Object(a.a)(v,2),g=w[0],N=w[1],S=Object(c.useState)(""),k=Object(a.a)(S,2),I=k[0],y=k[1],C=Object(c.useState)(null),F=Object(a.a)(C,2),D=F[0],H=F[1],A=Object(c.useState)(null),E=Object(a.a)(A,2),J=E[0],L=E[1];Object(c.useEffect)((function(){m().then((function(e){u(e)}))}),[]);var B=function(e,n){L(n),H(e),setTimeout((function(){H(null)}),2e3)},M=function(e){O(t.filter((function(n){return n.name===e.name})).map((function(e){return e.id})),e).then((function(n){var r=Object(i.a)(t);r.filter((function(n){return n.name==e.name})).map((function(n){return n.number=e.number})),u(r),B("Number updated for ".concat(f),"green")})).catch((function(e){B(e.response.data,"red")}))};return Object(r.jsxs)("div",{children:[Object(r.jsx)(j,{message:D,color:J}),Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(d,{handleFilterInput:function(e){y(e.target.value)},newFilter:I}),Object(r.jsx)("h2",{children:"Add new number"}),Object(r.jsx)(l,{onSubmit:function(e){e.preventDefault();var n={name:f,number:g},r=!1;t.map((function(e){e.name==f&&(window.confirm("".concat(f," is already added to the phonebook, want to update the number?"))&&M(n),r=!0)})),r||p(n).then((function(e){u(t.concat(e)),B("".concat(f," added to the phonebook"),"green")})).catch((function(e){console.log(e.response.text),B(e.response.data.error,"red")})),h(""),N("")},nameInputHandler:function(e){h(e.target.value)},numInputHandler:function(e){N(e.target.value)},newName:f,newNumber:g}),Object(r.jsx)(s,{persons:t,filter:I,onDelete:function(e){var n=t.filter((function(n){return n.id==e})).map((function(e){return e.name}));window.confirm("Are you sure you want to delete ".concat(t.filter((function(n){return n.id==e})).map((function(e){return e.name}))," ?"))&&(x(e).then((function(n){var r=t.filter((function(n){return n.id!==e}));u(r)})),B("".concat(n," deleted from the phonebook"),"green"))}})]})};t(41);o.a.render(Object(r.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.3c616d31.chunk.js.map